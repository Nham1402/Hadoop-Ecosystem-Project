# Banking Data Ingestion Agent Configuration

# Agent components
agent1.sources = r1
agent1.sinks = k1
agent1.channels = c1

agent2.sources = r2
agent2.sinks = k2
agent2.channels = c2

# Source configuration - Spooldir for banking data files
agent1.sources.r1.type = spooldir
agent1.sources.r1.spoolDir = /data/input
agent1.sources.r1.channels = c1
agent1.sources.r1.deletePolicy = immediate
agent1.sources.r1.batchSize = 100

agent2.sources.r2.type = spooldir
agent2.sources.r2.spoolDir = /data/input
agent2.sources.r2.channels = c2
agent2.sources.r2.deletePolicy = immediate
agent2.sources.r2.batchSize = 100

# Channel configuration - Memory channel
agent1.channels.c1.type = memory
agent1.channels.c1.capacity = 1000
agent1.channels.c1.transactionCapacity = 100

agent2.channels.c2.type = memory
agent2.channels.c2.capacity = 1000
agent2.channels.c2.transactionCapacity = 100

# Sink configuration - Kafka sink
agent1.sinks.k1.type = org.apache.flume.sink.solr.morphline.MorphlineHandlerImpl$Builder
agent1.sinks.k1.channel = c1
agent1.sinks.k1.morphlineFile = /opt/flume/conf/morphline.conf
agent1.sinks.k1.morphlineId = morphline1

agent2.sinks.k2.type = org.apache.flume.sink.solr.morphline.MorphlineHandlerImpl$Builder
agent2.sinks.k2.channel = c2
agent2.sinks.k2.morphlineFile = /opt/flume/conf/morphline.conf
agent2.sinks.k2.morphlineId = morphline1

# Kafka sink configuration
agent1.sinks.k1.type = org.apache.flume.plugins.KafkaSink
agent1.sinks.k1.kafka.bootstrap.servers = kafka-1:29092,kafka-2:29093,kafka-3:29094
agent1.sinks.k1.kafka.topic = banking-transactions
agent1.sinks.k1.kafka.flumeBatchSize = 20
agent1.sinks.k1.kafka.producer.acks = 1

agent2.sinks.k2.type = org.apache.flume.plugins.KafkaSink
agent2.sinks.k2.kafka.bootstrap.servers = kafka-1:29092,kafka-2:29093,kafka-3:29094
agent2.sinks.k2.kafka.topic = banking-transactions
agent2.sinks.k2.kafka.flumeBatchSize = 20
agent2.sinks.k2.kafka.producer.acks = 1